{% extends 'base/base.html' %}
{% load static %}

{% block head_tags %}
  <title>Add Funds</title>
{% endblock head_tags %}

{% block content %}
  <div class="page-container">
    {% include 'base/header.html' %}
    <main class="cabinet">
      <div class="container">
        <div class="grid-wrap">
          <div class="aside-wrapper">
            {% include 'account/nav.html' %}
          </div>
          <div class="content-wrapper">
            <section class="add-funsd-main">
              <div class="wrapper block-white">
                <h1 class="fz25 center">Deposit</h1>
                <div class="btns-wrap">
                  <button class="js-toggle-deposit"><img class="invert" src="{% static '/img/btn-paypal.png' %}" alt=""></button>
                  <button class="js-toggle-deposit active"><img src="{% static '/img/btn-card.png' %}" alt=""></button>                </div>
                <div class="block-fund-input">
                  <input class="js-input-numeric add-funds-price" type="text">
                </div>
                  <form method="post" action="">
                                {% csrf_token %}
                            {{ create_invoice_form.payment_method }}
                            {{ create_invoice_form.cents }}
{#                        <input type="submit" value="Update">#}
                  </form>
                <div class="btn-wrap"><a class="btn js-popup" href="#popup-invoice-awaiting">Add Funds: </a></div>


                <div class="bottom-text">Check price calculator <a class="link" href="{% url 'order' %}">here</a></div>
                <div class="table">
                  <div class="tr">
                    <div class="td"><b>Invoive ID</b></div>
                    <div class="td"><b>Payment Method</b></div>
                    <div class="td"><b>Description</b></div>
                    <div class="td"><b>Cost</b></div>
                    <div class="td"><b>Status</b></div>
                    <div class="td"><b>Created</b></div>
                    <div class="td"><b>Action</b></div>
                  </div>
                  <div class="tr">
                    <div class="td">DM-11111</div>
                    <div class="td">Paypal</div>
                    <div class="td">Social Media Marketing</div>
                    <div class="td add-funds-price"></div>
                    <div class="td"><span class="c-orange">Awaiting Payment</span></div>
                    <div class="td">07.08.2022</div>
                    <div class="td"><a class="js-popup" href="#popup-invoice-awaiting">View</a></div>
                  </div>
                  <div class="tr">
                    <div class="td">DM-22222</div>
                    <div class="td">CreditCard</div>
                    <div class="td">Social Media Marketing</div>
                    <div class="td">1200$</div>
                    <div class="td"><span class="c-green">Paid</span></div>
                    <div class="td">06.08.2022</div>
                    <div class="td"><a class="js-popup" href="#popup-invoice-paid">View</a></div>
                  </div>
                  <div class="tr">
                    <div class="td">DM-33333</div>
                    <div class="td">Coinbase</div>
                    <div class="td">Social Media Marketing</div>
                    <div class="td">200$</div>
                    <div class="td"><span class="c-green">Paid</span></div>
                    <div class="td">05.08.2022</div>
                    <div class="td"><a class="js-popup" href="#popup-invoice-paid">View</a></div>
                  </div>
                </div>
                <div class="pagination-wrap">
                  <ul>
                    <li><a href="#">
                        <svg viewBox="0 0 16 16" width="16px">
                          <use xlink:href="./img/sprite.svg#ic-arrow-left"></use>
                        </svg></a></li>
                    <li><span>1</span></li>
                    <li><a href="#">2</a></li>
                    <li><a href="#">3</a></li>
                    <li><a href="#">4</a></li>
                    <li><span class="gray">...</span></li>
                    <li><a href="#">10</a></li>
                    <li><a href="#">
                        <svg viewBox="0 0 16 16" width="16px">
                          <use xlink:href="{% static '/img/sprite.svg' %}#ic-arrow-right"></use>
                        </svg></a></li>
                  </ul>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </main>
    <div class="container">
      <footer class="footer-main cabinet">
        {% include 'base/footer.html' %}
      </footer>
      {% include 'popup/accept-cookies.html' %}
    </div>
  </div>
  {% include 'popup/instagram.html' %}
  {% include 'popup/discord.html' %}
  {% include 'popup/telegram.html' %}
  {% include 'popup/twitter.html' %}
  {% include 'popup/login.html' %}
  {% include 'popup/signup.html' %}
  <div class="mfp-hide popup popup--invoice" id="popup-invoice-awaiting">
    <div class="header-wrap">
      <div class="left">
        <div class="logo-wrap"><img src="{% static '/img/logo.svg' %}" alt=""/></div>
        <p>Social Media marketing service <br>SIA ”OFFERBOOSTED” <br>dmsbulkteam@gmail.com</p>
      </div>
      <div class="right">
        <div class="title">INVOICE</div>
        <p>ID (#DM-11111)</p>
      </div>
    </div>
    <div class="info-wrap">
      <div class="item"><b>Invoice to:</b>
        <p>Client Email adress and Name</p>
      </div>
      <div class="item"><b>Invoice data:</b>
        <p>06.08.2022</p>
      </div>
    </div>
    <div class="table-info">
      <div class="tr">
        <div class="td"><b>Invoice ID</b></div>
        <div class="td"><b>Payment Method</b></div>
        <div class="td"><b>Description</b></div>
        <div class="td"><b>Status</b></div>
      </div>
      <div class="tr">
        <div class="td">DM-11111</div>
        <div class="td">Paypal</div>
        <div class="td">Social Media Marketing program</div>
        <div class="td"><span class="status c-orange">AWAITING PAYMENT</span></div>
      </div>
    </div>
    <div class="table-total">
      <div class="tr">
        <div class="td"><b>Sub Total</b></div>
        <div class="td add-funds-price"></div>
      </div>
      <div class="tr">
        <div class="td"><b>Total</b></div>
        <div class="td add-funds-price"></div>
      </div>
    </div>
{#    <div class="btn-wrap" ><a class="btn" id="add-funds-btn" href="#">DEPOSIT</a></div>#}




      <div id="paypal-button-container"></div>

    <!-- Include the PayPal JavaScript SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=ARv3ot_OU4zgMCM_vZ3Xgb0c0ovmFfL_pRRrIlLxPWuq7nZMUUvO2PHS9cCoa1eYNt9G1apgJxyUwqbr&currency=USD"></script>

    <script>

        // Render the PayPal button into #paypal-button-container
        paypal.Buttons({

            // Set up the transaction
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        invoice_id: 'DM + "-" + randString',
                        reference_id: {{ user.pk }},
                        description: "Social Media Marketing program",
                        amount: {
                            value: '88.44'
                        }
                    }]
                });
            },

            // Finalize the transaction
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(orderData) {
                    // Successful capture! For demo purposes:
                    console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));

                    var transaction = orderData.purchase_units[0].payments.captures[0];
                    console.log("transaction", transaction.id)
                    alert('Transaction '+ transaction.status + ': ' + transaction.id + '\n\nSee console for all available details');

                    // Replace the above to show a success message within this page, e.g.
                    // const element = document.getElementById('paypal-button-container');
                    // element.innerHTML = '';
                    // element.innerHTML = '<h3>Thank you for your payment!</h3>';
                    // Or go to another URL:  actions.redirect('thank_you.html');
                });
            }


        }).render('#paypal-button-container');
    </script>






  </div>
  <div class="mfp-hide popup popup--invoice" id="popup-invoice-paid">
    <div class="header-wrap">
      <div class="left">
        <div class="logo-wrap"><img src="{% static '/img/logo.svg' %}" alt=""/></div>
        <p>Social Media marketing service <br>SIA ”OFFERBOOSTED” <br>dmsbulkteam@gmail.com</p>
      </div>
      <div class="right">
        <div class="title">INVOICE</div>
        <p>ID (#DM-11111)</p>
      </div>
    </div>
    <div class="info-wrap">
      <div class="item"><b>Invoice to:</b>
        <p>Client Email adress and Name</p>
      </div>
      <div class="item"><b>Invoice data:</b>
        <p>06.08.2022</p>
      </div>
    </div>
    <div class="table-info">
      <div class="tr">
        <div class="td"><b>Invoice ID</b></div>
        <div class="td"><b>Payment Method</b></div>
        <div class="td"><b>Description</b></div>
        <div class="td"><b>Status</b></div>
      </div>
      <div class="tr">
        <div class="td">DM-11111</div>
        <div class="td">Paypal</div>
        <div class="td">Social Media Marketing program</div>
        <div class="td"><span class="status c-green">PAID</span></div>
      </div>
    </div>
    <div class="table-total">
      <div class="tr">
        <div class="td"><b>Sub Total</b></div>
        <div class="td add-funds-price"></div>
      </div>
      <div class="tr">
        <div class="td"><b>Total</b></div>
        <div class="td add-funds-price"></div>
      </div>
    </div>
    <div class="btn-wrap"><a class="btn" href="#">Download</a></div>
  </div>
{% endblock content %}
{% block scripts %}
    <script src="https://js.stripe.com/v3/"></script>
  <script src="{% static '/js/js/stripe.js' %}"></script>
      <script src="{% static '/js/js/paypal.js' %}"></script>
{% endblock scripts %}